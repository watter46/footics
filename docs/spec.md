# Footics 仕様

## 全体仕様 QA

- **Q: 全体の UI テーマ・トーンは？**

  - A: 「ダーク (背景＋ UI) ＋明るめアクセント」の配色を基調とし、色のコントラストを十分に確保。余白を活かしたシンプルな UI で、shadcn/ui のモダンなコンポーネントを活用。情報の階層性・視認性を重視し、イベント種別や状態は色分け・アイコンで直感的に区別。ホバー効果やアニメーションを控えめに取り入れ、クリーンでスポーティな印象を保つ。MVP ではダークテーマのみ対応し、ライトテーマは将来対応とする。

- **Q: アプリの目的は？**
  - A: サッカーの試合観戦中に選手ごとのイベントやコメントを素早く記録し、戦術的な振り返り・分析を支援する。
- **Q: Phase 1 (MVP) のゴールは？**
  - A: 試合中にリアルタイムでイベントとコメントを記録でき、後から詳細編集・振り返りが可能な最小限プロダクトを完成させる。
- **Q: 想定ユーザーは？**
  - A: サッカー戦術に関心のあるファンや試合中に分析メモを残したい人。
- **Q: プロダクト名は？**
  - A: 仮称は Footics。かなり気に入ってるのでたぶんこのまま 最終名称は別途決定する。
- **Q: 永続化の方式は？**
  - A: IndexedDB（Dexie.js 経由）を用いる。イベントや試合データの蓄積に対応するため。
- **Q: 採用する主要スタックは？**
  - A: Next.js 15、TypeScript、React 19、Tailwind CSS、shadcn/ui、Zustand、zod、Lucide React、tailwind-merge。
- **Q: 主要機能ブロックは？**

  - A: タイマー、フォーメーション配置、アクション記録、タイムライン表示、(テンプレート管理)、試合管理。

- **Q: 「イベント」から「アクション」への用語変更の理由は？**

  - A: 選手の能動的な行為（パス、シュート、タックルなど）を明確に記録する概念として「アクション」に統一。交代やカードなどの試合管理イベントとは区別するため。選手のプレーそのものに焦点を当てた分析を目指す。

- **Q: モバイル UI の基本構成は？**

  - A: タブ切替式を採用。上部にタイマー（ミニマル表示）を固定し、中央部で「アクション記録」「選手登録」「タイムライン」の 3 タブを切り替え。デスクトップ版のレイアウトは Phase1.5 以降で検討。

- **Q: 3 タブの役割分担は？**

  - A: **(1) 選手登録タブ**: 試合前の準備専用。フォーメーション選択 + 選手情報編集。**(2) アクション記録タブ**: 試合中のアクション記録専用。フォーメーション表示 + アクションボタン。**(3) タイムラインタブ**: 記録したアクションの一覧・編集・振り返り。この構成により「準備 → 記録 → 振り返り」の流れが明確になる。

- **Q: モバイルのタイマー表示は？**

  - A: ミニマル表示を採用。デフォルトは時刻のみ表示（例: `12:34`）し、タップで展開して操作ボタンを表示。スクロール時は自動で最小化し、画面スペースを最大化。

- **Q: モバイルのアクション記録方法は？**

  - A: アクション記録タブ内で「アクション先行モード」と「選手先行モード」を切り替え可能。アクション先行では大きなアクションボタン（2 列グリッド）をワンタップで即記録（選手未割当）。選手先行では簡易フォーメーション表示で選手を選択後、アクションボタンで記録。

- **Q: スライド評価 UI とは？**

  - A: アクションの質を 5 段階（1: Poor → 5: Excellent）で記録する UI。**タップのみ**ならデフォルト評価 3（Good）で即記録、**長押し（200ms）+ スライド**で 1-5 の評価を細かく記録可能。背景色がリアルタイムで変化し、離すと確定。最速記録と詳細評価を両立。

- **Q: アクションのグループ分類は？**

  - A: 7 グループに分類: **(1) ポゼッション**（パス、シュート、ドリブルなど）、**(2) ディフェンス**（タックル、インターセプトなど）、**(3) ゴールキーパー**（セーブ、配球など）、**(4) オフザボール**（ポジショニング、ランなど）、**(5) セットプレー**（コーナー、FK など）、**(6) メンタル・チーム**（コミュニケーション、判断など）、**(7) 試合管理**（交代、カード、VAR）。

- **Q: 交代やカードはアクションとして扱うか？**

  - A: **扱わない**。交代やカードは「試合管理イベント」として、アクションとは別に管理。選手のプレー分析に集中するため、試合運営の出来事とは区別する。交代は選手登録タブの選手編集モーダルでタイムスタンプ付きで記録し、タイムラインには視覚的に区別して表示（グレーアウト、折りたたみ可能など）。

- **Q: モバイルの未割当アクション管理は？**
  - A: 下部に「未割当アクション」の件数を常時表示。タップでタイムラインタブに移動し、未割当アクションを編集して選手を割り当てる。

## 決定事項サマリ

- MVP ではリアルタイム記録と後編集（タイムライン・アクション割当）を優先。
- ローカル IndexedDB を前提とし、オンライン同期は Phase1 scope 外。
- UI コンポーネントは Tailwind + shadcn/ui ベースで設計。
- 状態管理は画面全体のストアとして Zustand を採用。
- モバイル UI はタブ切替式（選手登録/アクション記録/タイムライン）、タイマーはミニマル表示を採用。
- **用語変更**: 「イベント」→「アクション」に統一。選手の能動的なプレーを明確に記録。
- **スライド評価 UI**: タップのみならデフォルト評価 3、長押し + スライドで 1-5 段階評価。
- **交代・カードの扱い**: アクションとは別の「試合管理イベント」として管理。タイムラインでは視覚的に区別。
- **7 グループ分類**: ポゼッション、ディフェンス、GK、オフザボール、セットプレー、メンタル、試合管理。
- デスクトップ版は Phase1.5 以降で検討。

## 機能カテゴリ（概要）

- **タイマー機能**: 前半/後半切替、経過時間管理、タイマー 5 秒 30 秒+-、クイックスタート。
- **フォーメーション配置**: ピッチ上での選手配置、ドラッグ編集、プリセットフォーメーション。
- **アクション記録**: 選手先行・アクション先行モード、クイックアクション、スライド評価 UI（5 段階）、コメント、未割当アクションの後割当。
- **タイムライン表示**: 時系列表示、アクション編集・削除、前後半セクション分割、試合管理イベント（交代・カード）の視覚的区別表示。
- **テンプレート管理**: テンプレート CRUD、インポート/エクスポート（Phase1.5 予定）。
- **試合管理**: 試合一覧、詳細閲覧、統計（Phase1.5 予定）、エクスポート・削除、選手交代のタイムスタンプ管理。

## 仕様策定フロー

1. この `spec.md` で全体仕様を QA 形式で合意。
2. 機能ごとに `docs/specs/<feature>.md` を作成し、対応する QA を記録。
3. 決定事項を各ファイルに反映したら TODO/実装タスク化。

## 次のアクション候補

- 全体仕様の追加 QA（例: 画面構成方針、非 Functional 要件）。
- 機能別ファイルの作成順序決定（どの機能から詳細設計するか）。
- QA テンプレートの整備が必要なら提案。
