# Phase1 機能仕様 QA

このドキュメントは Phase1（MVP）で実装する機能について、未回答の質問を整理したものです。
各機能について質問に回答することで、実装に必要な仕様を明確にします。

---

## 1. 選手登録機能

### 基本機能

- **Q: 選手情報に必須の項目は何ですか？**

  - A: 名前か背番号
    登録をそもそもしないという選択肢もあり
    その場合タイムライン上では?表示でアクションだけが表示される

- **Q: 選手の背番号は重複を許可しますか？**

  - A: いいえ

- **Q: 選手名の最大文字数は？**

  - A:　わからないので一般的な名前の文字数制限

- **Q: ポジション選択は自由入力ですか、プリセットから選択ですか？**
  - A: プリセット(一般的に使われるポジション名(ex. LCB RWG など)にする)

### フォーメーション選択

- **Q: Phase1 で対応するプリセットフォーメーションは？**

  - A: （[
    "2-3-4-1",
    "3-5-2",
    "3-4-3",
    "3-4-2-1",
    "3-4-1-2",
    "3-1-4-2",
    "3-5-1-1",
    "3-3-4",
    "3-3-1-3",
    "3-3-3-1",
    "3-2-4-1",
    "4-2-3-1",
    "4-3-3",
    "4-4-2",
    "4-1-4-1",
    "4-3-1-2",
    "4-4-1-1",
    "4-5-1",
    "4-2-2-2",
    "4-3-2-1",
    "4-1-3-2",
    "4-1-2-3",
    "4-2-4",
    "4-2-1-3",
    "5-3-2",
    "5-4-1",
    "5-2-3",
    "5-2-2-1",
    ]

- **Q: カスタムフォーメーションの作成は Phase1 で対応しますか？**

  - A: とりあえず 4-2-3-1 だけにするが自由に動かせるようにはする

- **Q: フォーメーション上での選手配置の調整方法は？**
  - A: ドラッグ移動可能

### 選手の追加・編集・削除

- **Q: 選手の最大登録数は？**

  - A: 最大はわからないが親善試合なども含めて多めに見積もって 30?

- **Q: 試合開始後に選手を追加できますか？**

  - A: はい。追加というか割り当てです

- **Q: 選手削除時、その選手に紐づくアクション記録はどうなりますか？**
  - A: （削除禁止？ アクション記録は保持して選手情報のみ削除？）
    確認を出してから削除も可
    間違った選手のアクションだった可能性もあるのでそういうときは別の選手を割り当てられるようにする

### テンプレート機能

phase1 では必要ない後に実装

- **Q: Phase1 でテンプレート保存機能は実装しますか？**

  - A:

- **Q: テンプレート名は必須ですか？最大文字数は？**

  - A:

- **Q: テンプレートの読み込み方法は？**
  - A: （一覧から選択？ 検索機能は？）

---

## 2. アクション記録機能

### クイックアクション

- **Q: Phase1 で対応するクイックアクションは 4 つで確定ですか？**

  - A: いいえ
    アクションをグループ化して選択しやすいようにはします

- **Q: クイックアクションのカスタマイズは Phase1 で対応しますか？**
  - A: はい　アクションにないものを補う

### 詳細アクション選択

- **Q: Phase1 で実装するアクショングループと具体的なアクション種別のリストは？**

  - A:

    - ポゼッション:
    - ディフェンス:
    - セットプレー:
    - その他:

    ここは検討します
    どこまで作りこむかに寄ります

- **Q: 詳細選択画面での表示方法は？**

  - A: モーダル

- **Q: アクショングループの並び順は？**
  - A: デフォルトはカテゴリ別　直近使ったものは直近使ったものがわかるようなグループ名にして先頭にする

### スライド評価 UI

phase1 では Good Bad にする
その後はオプションで 3 段階 5 段階のオプションで変更できるようにする

- **Q: スライド評価 UI のアニメーション速度は？**

  - A: （長押し判定: 100ms、背景色変化: 0ms など）

- **Q: 評価なし（null）の記録は可能ですか？**

  - A: いいえ

- **Q: 評価の後からの変更は可能ですか？**

  - A:はい

- **Q: スライド評価の視覚的フィードバックの詳細は？**
  - A: 背景色 Good: 緑 Bad: 赤　評価したらボタンのそばに Good! Bad!を小さく表示させる

### アクション記録モード

- **Q: デフォルトはどちらのモードですか？**

  - A: （選手先行？ アクション先行？）
    モードというくくりはなくしてフォーメーション->フォーメーション変更+選手編集
    アクション->選手編集で編集したものを反映 (デフォルトではフォーメーション順に並べてはいるが選手は登録されていない状態)

- **Q: モード切替の操作方法は？**

  - A: （トグルスイッチ？ ラジオボタン？ 設定画面？）
    なし

- **Q: モードの設定は保存されますか？**

  - A: （試合ごと？ アプリ全体の設定？）
    なし

### アクション

- **Q: フォーメーション表示のサイズは？**

  - A: （画面の何割を占める？ 調整可能？）

  タイマーにかぶらないくらい
  編集モーダルはかぶってもよい

  - **Q: 選手選択時のハイライト表示は？**

  - A: （色、枠線、拡大など）
    UI テーマに合わせる

- **Q: 選手選択の解除方法は？**

  - A: （再度タップ？ × ボタン？ 他の選手をタップ？）
    再度タップ or ほかの選手をタップ

- **Q: アクションボタンのサイズとグリッド配置は？**

  - A: （2 列？ 3 列？ ボタンの高さは？）
    押しやすい大きさ モバイルは 2 列ではみ出るなら横スクロール

- **Q: 「今すぐ選手割当」ボタンの表示時間は？**

  - A: （3 秒で確定？ カスタマイズ可能？）
    後フェーズで検討

- **Q: 未割当アクション記録時の音声フィードバックは？**
  - A: （効果音？ バイブレーション？ 視覚のみ？）
    後フェーズで検討

### コメント機能

- **Q: コメントの最大文字数は？**

  - A:　 50 文字

- **Q: コメント入力画面はどこに表示しますか？**

  - A: （ボトムシート？ モーダル？ インライン？）

- **Q: 音声入力は Phase1 で対応しますか？**
  - A:　アクションタブにコメントタブを用意するか
    アクションタブの下(スクロール)

---

## 3. タイムライン表示機能

### 基本表示

- **Q: タイムライン上での 1 アクションの表示形式は？**
- **Q: アクションアイコンのサイズと配置は？**

  - A: （カード？ リスト？ 表示項目は？）
    |
    |●{ActionIcon} {#Number} {PlayerName} {Action}
    |
    |
    |
    |

    UI 説明:
    左に線(タイムライン)を可視化
    記録したイベントを線上に追加していく(Round で中にアクションアイコン)

- **Q: コメントの省略表示は何文字まで？**
  - A: （例: 30 文字で「...」）
    20 文字くらい

### 前半/後半セクション

セクション区切りは必要ないです
タイマーだけは設定ボタンを用意すること

- **Q: セクション区切りの視覚表現は？**

  - A: （背景色変更？ 区切り線？ ヘッダー？）

- **Q: セクションの折りたたみは可能ですか？**
  - A:

### 試合管理イベント表示

後フェーズで検討

- **Q: 交代イベントの表示デザインは？**

  - A: （グレーアウトの度合い、折りたたみアイコン、OUT/IN の表示方法など）

- **Q: カードイベント（イエロー/レッド）の表示は？**

  - A: （Phase1 で対応する？ アイコンと色は？）

- **Q: 試合管理イベントセクションのデフォルト状態は？**
  - A: （展開？ 折りたたみ？）

### 未割当アクション

後フェーズで検討

- **Q: 未割当アクションの色分けは？**

  - A: （赤？ オレンジ？ 点線枠？）

- **Q: 未割当バッジの配置とデザインは？**

  - A: （画面下部固定？ 件数表示のみ？ アイコンは？）

- **Q: 未割当アクションとは？**

  - A: 記録時に「どの選手が実行したか」を即座に特定できなかったアクション。試合中に素早くアクションだけ記録し、後からタイムライン画面で該当選手を割り当てることができる。例：ゴール前の混戦や遠目で選手が判別できない場合など。

### フィルタリング

後フェーズで検討

- **Q: Phase1 で実装するフィルタ条件は？**

  - A: （アクション種別、選手、前半/後半、未割当のみ、試合管理イベント表示/非表示）

- **Q: フィルタ UI の表示方法は？**

  - A: （ボトムシート？ ドロワー？ モーダル？）

- **Q: 複数フィルタの組み合わせは AND ですか OR ですか？**

  - A:

- **Q: フィルタ設定の保存は？**
  - A: （試合ごと？ アプリ全体？ 保存しない？）

### 検索機能

後フェーズで検討

- **Q: 検索対象は？**

  - A: （コメント？ 選手名？ アクション種別名？ すべて？）

- **Q: 検索ボックスの配置は？**

  - A: （タイムライン上部？ フィルタボタンの横？）

- **Q: 検索のリアルタイム性は？**
  - A: （入力中に即座にフィルタ？ Enter で確定？）

### アクション編集

- **Q: 編集可能な項目は？**

  - A: （アクション種別、選手、タイムスタンプ、評価、コメント）
    アクション->タイムスタンプ アクションの種類 コメント
    選手->背番号 名前 ポジション

- **Q: タイムスタンプ編集の UI は？**

  - A: （±5 秒/±30 秒ボタン + 直接入力？ タイムピッカー？）
    直接入力は必須で後はお任せします

- **Q: 編集中の他のタップ動作は？**
  - A: （編集をキャンセル？ 確認ダイアログ？）

### アクション削除

- **Q: 削除の確認ダイアログは表示しますか？**

  - A:　はい

- **Q: 削除のアンドゥ機能は？**
  - A: （Phase1 で対応？ トーストに「元に戻す」ボタン？）
    後フェーズで検討

---

## 4. 試合管理機能

### 試合の作成

- **Q: 試合作成に必須の項目は？**

  - A: （チーム名、対戦相手、試合日時、会場など）
    チーム名 対戦相手　試合日時は必須 それ以外はオプション

- **Q: 試合日時の入力方法は？**

  - A: （日付ピッカー + タイムピッカー？ 「今すぐ開始」ボタン？）
    日付ピッカー

- **Q: 会場情報は必須ですか？**

  - A:　いいえ

- **Q: チーム名のデフォルト値は？**
  - A: （前回の試合から引き継ぐ？ 空欄？ 設定から取得？）
    前回の試合から引き継ぐ

### 試合の一覧表示

- **Q: 一覧表示の形式は？**

  - A: （カード形式？ リスト形式？）
    自分が記録したのはリスト形式
    API で試合を取得する処理はまだしないので事前に試合じょうほうはわからない

- **Q: 1 件あたりの表示情報は？**

  - A: （日時、チーム名、対戦相手、スコア、状態など）
    日時、チーム名、対戦相手

- **Q: 並び順は？**

  - A: （試合日時の降順？ 作成日時順？ カスタマイズ可能？）
    試合日時の降順

- **Q: ページネーションは？**
  - A: （無限スクロール？ ページ番号？ Phase1 では全件表示？）
    ページ番号

### 試合の詳細表示

- **Q: 詳細画面に表示する情報は？**
  API はまだ使えないので後フェーズで検討

  - A: （試合情報、フォーメーション、タイムライン、基本統計など）

- **Q: 基本統計とは？**

  - A: （ゴール数、シュート数、パス数、タックル数、カード数など）

- **Q: 統計の表示方法は？**
  - A: （テキスト？ グラフ？ Phase1 ではテキストのみ？）

### 試合の編集

後フェーズで検討

- **Q: 試合情報の編集は試合中も可能ですか？**

  - A:

- **Q: 編集画面の表示方法は？**
  - A: （モーダル？ 別ページ？ インライン？）

### 試合の削除

- **Q: 削除の確認メッセージの内容は？**

  - A: （「本当に削除しますか？」？ 試合情報も表示？）
    本当に削除しますか？

- **Q: 削除のアンドゥ機能は？**
  - A:　後フェーズで検討

### 試合の複製

後フェーズで検討

- **Q: 複製時にコピーされる情報は？**

  - A: （フォーメーション、選手情報のみ。アクション記録はクリア）

- **Q: 複製後の試合名は？**
  - A: （「〇〇のコピー」？ 空欄？ 元の試合名のまま？）

### 試合状態管理

- **Q: 状態遷移のトリガーは？**
  　後フェーズで検討

  - A:
    - 準備中 → 進行中: （タイマー開始？）
    - 進行中 → 完了: （タイマー終了？ 手動設定？）

- **Q: 完了した試合の再開は可能ですか？**
  - A:　はい

### 選手交代の記録

- **Q: 交代記録の操作フローは？**

  - A: （選手登録タブで選手タップ → 編集モーダル → 「交代」ボタン → OUT/IN 選手選択 → タイムスタンプ指定 → 保存）
    フォーメーションタブで選手タップ → 編集モーダル → 「交代」ボタン → 交代選手を自分で入力 (後フェーズで検討 OUT/IN 選手選択) → 保存

- **Q: OUT/IN 選手の選択 UI は？**

  - A: （ドロップダウン？ ボトムシートで選手一覧？ フォーメーションから選択？）
    　後フェーズで検討

- **Q: 交代のタイムスタンプのデフォルト値は？**

  - A: （現在のタイマー時刻？ 手動入力必須？）
    　後フェーズで検討

- **Q: 同時交代（複数選手）は対応しますか？**
  - A:
    　後フェーズで検討

---

## 5. 全体 UI/UX

### ナビゲーション

- **Q: タブ切替のアニメーションは？**

  - A: （スライド？ フェード？ アニメーションなし？）
    スライド

- **Q: タブアイコンと文字の表示は？**

  - A: （アイコン + テキスト？ アイコンのみ？ テキストのみ？）
    アイコン+テキスト

- **Q: タブの配置は？**
  - A: （画面下部？ 上部？）
    上部

### トースト通知

- **Q: トーストの表示位置は？**

  - A: （画面下部？ 上部？ 中央？）
    上部

- **Q: トーストの表示時間は？**

  - A: （例: 3 秒？ アクションに応じて変更？）
    3 秒

- **Q: トーストのデザインは？**
  - A: （色、アイコン、閉じるボタンの有無など）
    邪魔にならないように小さく表示

### ローディング状態

- **Q: データ読み込み中の表示は？**

  - A: （スピナー？ スケルトン UI？ プログレスバー？）
    スケルトン UI

- **Q: ローディング表示の位置は？**
  - A: （画面中央？ 該当エリア内？）
    該当エリア内

### エラー表示

- **Q: エラーメッセージの表示方法は？**

  - A: （トースト？ モーダル？ インライン？）
    トースト

- **Q: エラー時のリトライ方法は？**
  - A: （リトライボタン？ 自動リトライ？）
    自動リトライ

### 空状態

- **Q: 試合がない場合の表示は？**

  - A: （「試合を作成してください」メッセージ + 作成ボタン？ イラスト？）
    作成ボタン
    無い場合は一覧画面に試合がないことがわかるアイコンを大きく表示

- **Q: アクションがない場合の表示は？**
  - A: （「アクションを記録してください」メッセージ？）
    オリジナルアイコン(まだ未定) + 20 文字までのアクション説明

### 確認ダイアログ

- **Q: 確認ダイアログのデザインは？**

  - A: （shadcn/ui の AlertDialog？ カスタム？）
    AlertDialog

- **Q: ボタンのラベルは？**
  - A: （「はい/いいえ」？ 「削除/キャンセル」？ アクションに応じて変更？）
    削除/キャンセル

---

## 6. データ構造

### TypeScript 型定義

- **Q: アクションレコードの型定義で、metadata の詳細は？**
  後フェーズで検討

  - A: （Phase1 で location は使用する？ context とは？）

- **Q: 選手の型定義で、periods 配列の詳細は？**
  後フェーズで検討

  - A: （start/end の単位は秒？ ミリ秒？ null の扱いは？）

- **Q: 試合の型定義の全体構造は？**
  後フェーズで検討
  - A: （Match 型に含める項目をすべて列挙）

### IndexedDB スキーマ

- **Q: テーブル構成は？**

  - A: （matches, players, actions, substitutions など）

- **Q: インデックスの設定は？**

  - A: （matchId, timestamp, playerId など）

- **Q: データのバージョン管理は？**
  - A: （スキーマ変更時のマイグレーション戦略）

---

## 7. パフォーマンス・最適化

### 初期表示

- **Q: 初回起動時のデータ読み込み範囲は？**
  - A: （最新 10 試合のみ？ すべて？ 必要に応じて遅延読み込み？）
    10

### タイムライン

- **Q: 仮想スクロールは Phase1 で実装しますか？**

  - A:　いいえ

- **Q: Phase1 で想定するアクション記録数の上限は？**
  - A: （例: 100 件程度？）
    50 くらい？

### 状態管理

おまかせ

- **Q: Zustand のストア構成は？**

  - A: （1 つのグローバルストア？ 機能ごとに分割？）

- **Q: どの状態を永続化しますか？**
  - A: （タイマー状態、モード設定、フィルタ設定など）

---

## 8. アクセシビリティ

- **Q: キーボード操作は Phase1 で対応しますか？**

  - A:　後フェーズで検討

- **Q: スクリーンリーダー対応は？**

後フェーズで検討

- A: （aria-label の設定など）

- **Q: フォーカス管理の方針は？**

後フェーズで検討

- A: （モーダル開閉時のフォーカス移動など）

---

## 9. テスト方針

- **Q: Phase1 で実装するテストの種類は？**

  - A: （Unit テスト？ Integration テスト？ E2E テスト？）
    Unit テスト

- **Q: テストカバレッジの目標は？**

  - A:　なし

- **Q: 優先的にテストする機能は？**
  - A: （データ永続化、アクション記録、タイマーなど）
    なし

---

## 次のステップ

各質問に回答後、`phase1-spec.md` に確定した仕様をまとめます。
回答は随時このファイルに追記してください。
